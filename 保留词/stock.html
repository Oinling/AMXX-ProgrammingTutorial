<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<title>AMXXPawn stock关键字</title>
	<style>
		:root {
			--primary-color: #3498db;
			--secondary-color: #2c3e50;
			--accent-color: #e74c3c;
			--light-bg: #f8f9fa;
			--dark-bg: #eaecef;
			--code-color: #0000ff;
			--border-color: #ddd;
		}
		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			line-height: 1.6;
			color: #333;
			max-width: 900px;
			margin: 0 auto;
			padding: 20px;
			background-color: #f9f9f9;
		}
		h1 {
			color: #2c3e50;
			border-bottom: 2px solid #3498db;
			padding-bottom: 10px;
			text-align: center;
		}
		h2, h3 {
			color: #2c3e50;
			border-bottom: 1px solid #eee;
			padding-bottom: 10px;
		}
		p {
			margin: 15px 0;
		}
		code {
			display: block;
			white-space: pre;
			background-color: #f5f5f5;
			border: 1px solid #ddd;
			border-radius: 4px;
			color: #0000ff;
			padding: 15px;
			overflow-x: auto;
			font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
			line-height: 1.5;
			margin: 15px 0;
			box-shadow: 0 1px 3px #0000001a;
		}
		.amxx-default {
			color: #0000ff;
		}
		.amxx-note {
			color: #000000;
		}
		.amxx-comment {
			color: #3f9f3f;
		}
		.amxx-di {
			color: #6f6f6b;
		}
		.amxx-string {
			color: #c0392b;
		}
		.amxx-number {
			color: #000000;
			font-weight: bold;
		}
		.amxx-enumname {
			background: linear-gradient(to right, rgb(93,20,10), rgb(153,51,255));
			background-clip: text;
			-webkit-background-clip: text;
			color: transparent;
		}
		.amxx-function {
			color: #711fc3;
			font-weight: bold;
		}
		.amxx-tag {
			color: #5d140a;
		}
		.amxx-identifier {
			color: #9933ff;
			font-weight: bold;
		}
		.highlight {
			background-color: #fffde7;
			padding: 2px 4px;
			border-radius: 3px;
		}
		.note-box {
			background-color: #e3f2fd;
			border-left: 4px solid #2196f3;
			padding: 15px;
			margin: 20px 0;
			border-radius: 0 4px 4px 0;
		}
		.warning-box {
			background-color: #ffebee;
			border-left: 4px solid #f44336;
			padding: 15px;
			margin: 20px 0;
			border-radius: 0 4px 4px 0;
		}
		.feature-list {
			background-color: #e8f5e9;
			border-left: 4px solid #4caf50;
			padding: 15px;
			margin: 20px 0;
			border-radius: 0 4px 4px 0;
		}
		.codetable {
			width: 100%;
			border-collapse: collapse;
			margin: 20px 0;
			box-shadow: 0 2px 3px rgba(0,0,0,0.1);
		}
		.codetable th, 
		.codetable td {
			border: 1px solid var(--border-color);
			padding: 12px 15px;
			text-align: left;
		}
		.codetable th {
			background-color: var(--secondary-color);
			color: white;
			font-weight: bold;
		}
		.codetable tr:nth-child(even) {
			background-color: var(--light-bg);
		}
		.codetable tr:hover {
			background-color: var(--dark-bg);
		}
	</style>
</head>
<body>

	<h1>AMXXPawn stock关键字</h1>
	
	<h2>1. 使用stock创建变量</h2>
	
	<p>stock关键字可用于声明、定义全局变量，点击查看：<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E7%AC%A6%E5%8F%B7/%E5%8F%98%E9%87%8F.html">变量指南</a>。</p>
	
	<p>代码示例：</p>

	<code><span class="amxx-di">#include</span> <<span class="amxx-string">amxmodx</span>>

<span class="amxx-comment">// 声明、定义仅当前插件可用的全局变量，若变量未被使用，将会被舍弃，不触发编译警告</span>
stock <span class="amxx-identifier">gDataVal1</span> = <span class="amxx-number">1024</span>;
<span class="amxx-comment">// 声明、定义仅当前插件可用的全局变量，若变量未被使用，将触发编译警告：标识符"gDataVal2"从未被使用</span>
new <span class="amxx-identifier">gDataVal2</span> = <span class="amxx-number">1024</span>;

public <span class="amxx-function">plugin_init</span>()
{
	<span class="amxx-comment">// 不使用gDataVal1和gDataVal2变量，gDataVal2会触发警告，gDataVal1不会</span>
}</code>

	<p>单独使用stock声明全局变量几乎与<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E4%BF%9D%E7%95%99%E8%AF%8D/new.html">new</a>相同，仅多出一个’备用‘特性。</p>
	
	<p>用stock声明的变量，可称呼为'备用变量'。</p>
	
	<p>备用变量的设计初衷是按需编译，方便inc文件的设计，确保未使用的变量不会增加插件的文件体积。</p>
	
	<p>通常是我们做好一个模块化插件后，创建一个inc文件，声明一些与插件内容相关的备用变量，让第三方插件有选择的使用。</p>
	
	<p>例如用备用变量储存你的插件名称、模块名称、插件版本、作者名称等等。</p>
	
	<p>通常不应该声明备用单值变量，对于没有变化需求的单值，声明<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E7%AC%A6%E5%8F%B7/%E5%B8%B8%E9%87%8F.html">常量</a>才是更优先的选择。</p>
	
	<p>虽然amxconst.inc文件中有同时使用public stock const声明的公共备用只读单值变量，随时更改数值，</p>
	
	<p>但那是amxmodx核心模块用特殊手段（后门）制作的共享备用公共变量（amxmodx公共变量）。</p>
	
	<p>我们用amxx插件无法制作amxx插件公共变量或amxmodx模块公共变量，详情点击：<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E4%BF%9D%E7%95%99%E8%AF%8D/public.html">public变量指南</a></p>
	
	<p>至少在AMX Mod X 1.10.0和旧版本中无法做到。</p>
	
	<div class="note-box">
	<h3>stock与其它声明说明符组合：</h3>

	<table class="codetable">
		<tr>
			<th>声明说明符组合</th>
			<th>全局变量特性</th>
			<th>批注</th>
		</tr>
		<tr>
			<td>stock</td>
			<td>储存在数据段<br>插件私有<br>备用</td>
			<td></td>
		</tr>
		<tr>
			<td>new stock</td>
			<td>储存在数据段（重复）<br>插件私有（重复）<br>备用</td>
			<td>建议删除意义重复的new</td>
		</tr>
		<tr>
			<td>public stock<br>stock public</td>
			<td>储存在数据段（重复）<br>插件私有（重复）<br>生成AMX平台公共变量</td>
			<td>语义冲突<br>建议删除失去备用意义的stock</td>
		</tr>
		<tr>
			<td>stock static<br>static stock</td>
			<td>储存在数据段（重复）<br>文件私有（覆盖插件私有）<br>备用</td>
			<td></td>
		</tr>
		<tr>
			<td>stock const</td>
			<td>储存在数据段<br>插件私有<br>只读<br>备用</td>
			<td></td>
		</tr>
		<tr>
			<td>new public stock<br>new stock public</td>
			<td>储存在数据段（重复）<br>插件私有（重复）<br>生成AMX平台公共变量</td>
			<td>语义冲突<br>建议删除失去备用意义的stock<br>建议删除意义重复的new</td>
		</tr>
		<tr>
			<td>new static stock<br>new stock static</td>
			<td>储存在数据段（重复）<br>文件私有（覆盖插件私有）<br>备用</td>
			<td>建议删除无意义的new</td>
		</tr>
		<tr>
			<td>new stock const<br>new const stock</td>
			<td>储存在数据段（重复）<br>插件私有（重复）<br>只读<br>备用</td>
			<td>建议删除意义重复的new</td>
		</tr>
		<tr>
			<td>public stock const<br>public const stock<br>stock public const<br>stock const public</td>
			<td>储存在数据段（重复）<br>插件私有（重复）<br>生成AMX平台公共变量<br>只读</td>
			<td>语义冲突<br>建议删除失去备用意义的stock<br>const只对私有变量有效</td>
		</tr>
		<tr>
			<td>static stock const<br>static const stock<br>stock static const<br>stock const static</td>
			<td>储存在数据段（重复）<br>文件私有（覆盖插件私有）<br>备用<br>只读</td>
			<td></td>
		</tr>
		<tr>
			<td>new public stock const<br>new public const stock<br>new stock public const<br>new stock const public<br>new const public stock<br>new const stock public</td>
			<td>储存在数据段（重复）<br>插件私有（重复）<br>生成AMX平台公共变量<br>只读</td>
			<td>语义冲突<br>建议删除意义重复的new<br>建议删除失去备用意义的stock<br>const只对私有变量有效<br>组合时const不能放最前面</td>
		</tr>
		<tr>
			<td>new static stock const<br>new static const stock<br>new stock static const<br>new stock const static<br>new const static stock<br>new const stock static</td>
			<td>储存在数据段（重复）<br>文件私有（覆盖插件私有）<br>备用<br>只读</td>
			<td>建议删除无意义的new<br>组合时const不能放最前面</td>
		</tr>
	</table>
	</div>

	<h2>2. 使用stock创建函数</h2>
	
	<p>stock关键字可用于声明、定义<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E7%AC%A6%E5%8F%B7/%E5%87%BD%E6%95%B0.html#StaticStock">文件私有备用函数</a>和<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E7%AC%A6%E5%8F%B7/%E5%87%BD%E6%95%B0.html#InternalStock">插件私有备用函数</a>。</p>
	
	<p>备用函数的设计初衷是按需编译，方便函数库（inc文件）的设计，确保未使用的函数不会增加插件的文件体积。</p>

	<p>若该函数未被使用，编译器不会检查函数内部语法错误，不会触发未使用警告，直接舍弃。</p>

	<p>代码示例：</p>

	<code><span class="amxx-di">#include</span> <<span class="amxx-string">amxmodx</span>>

<span class="amxx-comment">// 外部模块、插件以及当前插件所有文件皆可使用的函数</span>
public <span class="amxx-function">plugin_init</span>()
{
	<span class="amxx-comment">// 不调用备用函数，则该函数会被舍弃</span>
	<span class="amxx-comment">//TestFunc();</span>
}

<span class="amxx-comment">// 声明、定义仅当前插件可用的备用函数，虽然内部写了一些乱七八糟的错误代码，但只要不使用这个函数就没事</span>
stock <span class="amxx-function">TestFunc</span>()
{
	@@@^&*()	(^_^)
	return (T_T)
}</code>

	<p>对于插件自身需要使用的函数，应该使用<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E7%AC%A6%E5%8F%B7/%E5%87%BD%E6%95%B0.html#Static">文件私有函数</a>或<a href="https://oinling.github.io/AMXX-ProgrammingTutorial/%E7%AC%A6%E5%8F%B7/%E5%87%BD%E6%95%B0.html#Internal">插件私有函数</a>。</p>

</body>
</html>